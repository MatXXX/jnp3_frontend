var apiUrl="http://localhost:8000/api/",wsUrl="ws://localhost:8080/ws";angular.module("JNPAPP.api",["ngResource"]).config(["$resourceProvider",function(a){a.defaults.stripTrailingSlashes=!1}]).factory("User",["$resource",function(a){return a(apiUrl+"users/:username/",{},{save:{method:"POST",url:apiUrl+"users/create/"}},{stripTrailingSlashes:!1})}]).factory("Post",["$resource",function(a){return a(apiUrl+"posts/:id/",{id:"@id"})}]).factory("UserPosts",["$resource",function(a){return a(apiUrl+"users/:username/posts/")}]).factory("UserFriends",["$resource",function(a){return a(apiUrl+"users/:username/friends/")}]).config(["$httpProvider",function(a){a.defaults.headers.common["X-CSRFToken"]="{{ csrf_token|escapejs }}"}]),angular.module("JNPAPP.auth",["ngCookies","JNPAPP.api"]).config(["$httpProvider",function(a){a.defaults.xsrfCookieName="csrftoken",a.defaults.xsrfHeaderName="X-CSRFToken"}]).run(function(){hello.init({google:"624176282643-4o1ofqvtca1glkb44jthrriqhc46o92u.apps.googleusercontent.com"})}).controller("RegisterController",["$scope","User",function(a,b){a.newUser=new b,a.registerMessage=null;var c=function(b){a.registerErrors=b.data},d=function(c){a.newUser=new b,a.registerErrors=null,a.registerMessage="Account created, login plz"};a.Register=function(){a.newUser.$save().then(d,c)};var e=function(b){null!=b.error?a.registerErrors={Google:[null==b.error.message?b.error.code:b.error.message]}:a.registerErrors=b.data,a.$apply()},f=function(a,c,f){var g=new b;g.username=a.replace(/ /g,"_"),g.password=f,g.email=c,g.$save().then(d,e)};a.RegisterGoogle=function(){hello("google").login({scope:"email",force:!0}).then(function(a){hello(a.network).api("/me").then(function(a){f(a.name,a.email,a.id)},e)},e)}}]).controller("LoginController",["$scope","$http","$cookies",function(a,b,c){a.user=new Object,a.user.username=null,a.user.password=null,a.loginError=null;var d=function(b){a.userToken=b.data.token,a.loginError=null,c.put("Authorization","Token "+a.userToken,{path:"/"}),window.location.replace("/")};a.Login=function(){var c={username:a.user.username,password:a.user.password};b.post(apiUrl+"token/auth/",c).then(d).then(function(){a.loginError=null},function(b){a.loginError=b.data})};var e=function(b){a.registerErrors={Google:[null==b.error.message?b.error.code:b.error.message]},a.$apply()},f=function(c,f){var g={username:c.replace(/ /g,"_"),password:f};b.post(apiUrl+"token/auth/",g).then(d,e).then(function(){a.loginError=null},e)};a.LoginGoogle=function(){hello("google").login({scope:"email",force:!0}).then(function(a){hello(a.network).api("/me").then(function(a){f(a.name,a.id)},e)},e)}}]);